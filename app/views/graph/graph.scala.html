<svg class="disable-user-selection" v-attr="viewBox:viewBox" v-component="x-graph" v-ref="graph">
    <defs>
        <marker id="def-marker-arrow"
                markerWidth="2"
                markerHeight="2"
                refx="8"
                refy="1"
                orient="auto">
            <path d="M0,0 L0,2 L2,1 L0,0" class="marker-arrow"></path>
        </marker>
        <marker id="def-marker-ghost-arrow"
                markerWidth="2"
                markerHeight="2"
                refx="2"
                refy="1"
                orient="auto">
            <path d="M0,0 L0,2 L2,1 L0,0" class="marker-arrow"></path>
        </marker>
    </defs>
    <g class="dynamic-content"></g>
    <g v-component="x-link" v-repeat="links">
        <line class="link" v-attr="x1:source.x, y1:source.y, x2:target.x, y2:target.y"></line>
        <line class="marker-arrow"
              marker-end="url(#def-marker-arrow)"
              v-attr="x1:source.x, y1:source.y, x2:target.x, y2:target.y"></line>
    </g>
    <g class="node"
       v-attr="transform:'translate('+x+','+y+')'"
       v-component="x-node"
       v-repeat="nodes">
        <g class="node-group">
            <g v-if="menu">
                <x-radial-menu>
                    <x-radial-button v-on="click:setLinkSource">link</x-radial-button>
                    <x-radial-button v-on="click:deleteNode($event, id)">delete</x-radial-button>
                </x-radial-menu>
            </g>
            <circle class="node-circle" v-attr="r:(radius + 'em')"></circle>
        </g>
        <text class="node-label"
              text-anchor="middle"
              v-attr="transform:'translate('+labelX+','+labelY+')'"
              v-class="invisible:menu">
            Label {{$index}}
        </text>
    </g>
    <x-radial-menu v-attr="transform:'translate('+cmX+','+cmY+')'" v-if="displayContextMenu">
        <x-radial-button>create node</x-radial-button>
        <x-radial-button>calculate force</x-radial-button>
    </x-radial-menu>
</svg>

@views.html.components.radial.menu()
@views.html.components.radial.button()
@views.html.graph.ghostlink()